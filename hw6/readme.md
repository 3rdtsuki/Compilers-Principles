#### 符号表

符号表存在作用域结构体中。

id的类型未必在语法分析中才能获得，只要设定一个全局变量last_type（最近遇到的type关键字），可在第一次定义时确定它的type，后面就不可以改了，除非是不同的作用域的同名变量！

#### 类型检查

通过对语法树后序遍历实现，每个节点进行检查

表达式

赋值语句

输入输出

while

最后生成临时变量

#### 标签生成

自顶向下

stmt标签生成：赋值语句，if，while，for

judge，stmts，else_stmts等块组成

主要思想是把所有代码块的begin和next都生成，只要下一块的begin不等于跳转语句的标签，就输出跳转语句

另外io语句的string要放在代码最前面声明，加入队列

布尔表达式的标签：与或非，定好顺序

#### 代码生成

首先将表达式计算中所有需要缓存的都赋予临时变量

全局变量写在头部

stmt代码生成：按照各种语句的结构顺序，中间加上标签

布尔表达式需要根据与或非拆成若干子表达式，依次生成代码

特别地，deal_with_judge函数负责了judge语句的代码，因为里面有许多比较运算符

> jne:如果cmpl两个操作数不等则跳转；
>
> je：如果cmpl两个操作数相等则跳转；
>
> jmp：直接跳转
>
> 而对于testl是测试操作数是否为0，也就是说希望为0，所以
>
> jne:如果testl为1则跳转；je：如果testl为0则跳转

expr代码生成：加减乘除模

单目运算符，正负号

